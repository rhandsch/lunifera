package org.lunifera.metamodel.dsl.lunentity.testmodel

/**
 * Test 112233
 */
entity Library {

// property      
	var String name

	// contains 0:1 and 0:n
	contains BookIndex index opposite library
	contains Book[*] books opposite library
}

entity ExtendedLibrary extends Library {
// embedds the address
	embedds Address address

	// simple references
	refers Book lastLendedBook
	refers Book[*] allLendedBooks

	/** 
	 * Calculates the count of lended books
	 */
	def Integer determineLendedBooksCount () { 
		return getAllLendedBooks ( ) . size
	}
}

entity Address {
	var String street
	var int number
	var String postalcode
	refers Country country
	refers PostBox[*] postBoxes

	embedds Info info
}

entity PostBox {
	var String id
}

entity Country {
	var String value
	contains Province[] provinces opposite country

	embedds Info info
}

entity Province {
	container Country country opposite provinces

	embedds Info info
}


entity Book {
	var String name
	container Library library opposite books

}

entity BookIndex {
	var String name
	container Library library opposite index

}

entity Info {
	var String shortText
	var String longText
}
